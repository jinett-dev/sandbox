{"visual":{"name":"sandbox","displayName":"sandbox","guid":"sandboxC839D4652AE8497B8F89CE540B23B914","visualClassName":"Visual","version":"1.0.0","description":"JVIZ sandbox","supportUrl":"www.jinett.com","gitHubUrl":""},"author":{"name":"JVIZ","email":"support@jinett.com"},"apiVersion":"5.2.0","style":"style/visual.less","stringResources":{},"capabilities":{"dataRoles":[{"displayName":"Category Data","name":"category","kind":"Grouping"},{"displayName":"Measure Data","name":"measure","kind":"Measure"},{"displayName":"Status","name":"status","kind":"Measure"}],"objects":{"enableAxis":{"properties":{"show":{"type":{"bool":true}},"fill":{"type":{"fill":{"solid":{"color":true}}}}}},"colorSelector":{"properties":{"fill":{"type":{"fill":{"solid":{"color":true}}}}}}},"dataViewMappings":[{"categorical":{"categories":{"for":{"in":"category"},"dataReductionAlgorithm":{"top":{}}},"values":{"group":{"by":"grouping","select":[{"for":{"in":"measure"}},{"for":{"in":"status"}}]}}}}],"privileges":[]},"content":{"js":"var sandboxC839D4652AE8497B8F89CE540B23B914;(()=>{\"use strict\";var e={656:(e,t,i)=>{i.d(t,{E:()=>c});var a=i(581),o=i(84),l=o.Zb,s=o.Hn;class n extends l{constructor(){super(...arguments),this.show=new o.Zh({name:\"show\",displayName:void 0,value:!1,topLevelToggle:!0}),this.fill=new o.zH({name:\"fill\",displayName:\"Color\",value:{value:\"#000000\"}}),this.name=\"enableAxis\",this.displayName=\"Enable Axis\",this.slices=[this.show,this.fill]}}class r extends l{constructor(){super(...arguments),this.name=\"colorSelector\",this.displayName=\"Status Colors\",this.slices=[]}}class c extends s{constructor(){super(...arguments),this.enableAxis=new n,this.colorSelector=new r,this.cards=[this.enableAxis,this.colorSelector]}populateColorSelector(e){let t=this.colorSelector.slices;e&&e.forEach((e=>{t.push(new o.zH({name:\"fill\",displayName:e.name,value:{value:e.color},selector:a.p(0),altConstantSelector:e.selectionId.getSelector(),instanceKind:3}))}))}}},104:(e,t,i)=>{i.d(t,{u:()=>l});var a=i(261),o=i(656);class l{constructor(e){if(this.target=e.element,this.host=e.host,this.formattingSettingsService=new a.Z,this.updateCount=0,this.globalStatusColor=[],document){const e=document.createElement(\"p\");e.appendChild(document.createTextNode(\"Update count:\"));const t=document.createElement(\"em\");this.textNode=document.createTextNode(this.updateCount.toString()),t.appendChild(this.textNode),e.appendChild(t),this.target.appendChild(e)}}update(e){this.formattingSettings=this.formattingSettingsService.populateFormattingSettingsModel(o.E,e.dataViews),this.dataView=e.dataViews[0],this.viewModel=this.visualTransform(e,this.host);const t=document.createElement(\"table\"),i=document.createElement(\"thead\");let a=document.createElement(\"td\");a.appendChild(document.createTextNode(\"Category\")),i.appendChild(a),a=document.createElement(\"td\"),a.appendChild(document.createTextNode(\"Value\")),i.appendChild(a),a=document.createElement(\"td\"),a.appendChild(document.createTextNode(\"Status\")),i.appendChild(a),a=document.createElement(\"td\"),a.appendChild(document.createTextNode(\"color\")),i.appendChild(a),a=document.createElement(\"td\"),a.appendChild(document.createTextNode(\"SelectionID\")),i.appendChild(a),t.appendChild(i),this.viewModel.forEach((e=>{let i=document.createElement(\"tr\");a=document.createElement(\"td\"),a.appendChild(document.createTextNode(e.category)),i.appendChild(a),a=document.createElement(\"td\"),a.appendChild(document.createTextNode(e.value)),i.appendChild(a),a=document.createElement(\"td\"),a.appendChild(document.createTextNode(e.status)),i.appendChild(a),a=document.createElement(\"td\"),a.setAttribute(\"style\",\"color:\"+e.color),a.appendChild(document.createTextNode(e.color)),i.appendChild(a),a=document.createElement(\"td\"),a.appendChild(document.createTextNode(e.selectionId.getKey())),i.appendChild(a),t.appendChild(i)})),this.target.appendChild(t)}getFormattingModel(){return this.formattingSettingsService.buildFormattingModel(this.formattingSettings)}visualTransform(e,t){let i=[];if(this.target.innerHTML=\"\",!(this.dataView&&this.dataView.categorical&&this.dataView.categorical.categories[0]&&this.dataView.categorical.values[0]))return i;this.dataView.metadata;let a=this.dataView.categorical,o=a.categories[0],l=a.values,s=[],n=t.colorPalette;for(let e=0;e<o.values.length;e++){let t,a,r,c=\"\",d=\"\";for(let i=0;i<l.length;i++){let u=l[i];if(u.source.roles.measure&&(d=u.values[e]),u.source.roles.status){r=u.values[e],a=u.source.queryName;let i=this.globalStatusColor.find((e=>e.name==r)),l=this.globalStatusColor.indexOf(i);if(t=this.host.createSelectionIdBuilder().withCategory(o,e).withMeasure(a).createSelectionId(),u.objects&&null!=u.objects[e]){let t=u.objects[e];c=this.getColumnColorByObject(t,n,n.getColor(r).value),l>=0?this.globalStatusColor[l].color=c:this.globalStatusColor.push({name:r,color:c,selectionId:null})}else l>=0?c=this.globalStatusColor[l].color:(c=this.getColumnColorByIndex(o,e,n.getColor(r).value),this.globalStatusColor.push({name:r,color:c,selectionId:null}));let d=s.find((e=>e.name==r));s.includes(d)||s.push({name:r,color:c,selectionId:t})}}null==a&&(t=this.host.createSelectionIdBuilder().withCategory(o,e).createSelectionId());let u={color:c,selectionId:t,status:r,value:d,category:`${o.values[e]}`};i.push(u)}return this.formattingSettings.populateColorSelector(s),i}getCategoricalObjectValue(e,t,i,a,o){let l=e.objects;if(l){let e=l[t];if(e){let t=e[i];if(t){let e=t[a];if(void 0!==e)return e}}}return o}getValue(e,t,i,a){if(e){let a=e[t];if(a){let e=a[i];if(void 0!==e)return e}}return a}getColumnColorByIndex(e,t,i){return this.getCategoricalObjectValue(e,t,\"colorSelector\",\"fill\",{solid:{color:i}}).solid.color}getColumnColorByObject(e,t,i){return t.isHighContrast?t.background.value:this.getValue(e,\"colorSelector\",\"fill\",{solid:{color:i}}).solid.color}}l.Config={xScalePadding:.1,solidOpacity:1,transparentOpacity:1,margins:{top:0,right:0,bottom:25,left:30},xAxisFontMultiplier:.04}},581:(e,t,i)=>{function a(e){return null==e&&(e=0),{data:[{dataViewWildcard:{matchingOption:e}}]}}i.d(t,{p:()=>a})},84:(e,t,i)=>{i.d(t,{Hn:()=>l,Zb:()=>s,Zh:()=>r,zH:()=>c});var a=i(827);class o{}class l{}class s extends o{getFormattingCard(e,t,i){return{displayName:i&&this.displayNameKey?i.getDisplayName(this.displayNameKey):this.displayName,description:i&&this.descriptionKey?i.getDisplayName(this.descriptionKey):this.description,groups:[t],uid:e,analyticsPane:this.analyticsPane}}}class n extends o{constructor(e){super(),Object.assign(this,e)}getFormattingSlice(e,t){const i=this.type,a=this.name,o={displayName:t&&this.displayNameKey?t.getDisplayName(this.displayNameKey):this.displayName,description:t&&this.descriptionKey?t.getDisplayName(this.descriptionKey):this.description,uid:e+\"-\"+a};return Object.assign(Object.assign({},o),{control:{type:i,properties:this.getFormattingComponent(e,t)}})}getFormattingComponent(e,t){return{descriptor:a.B(e,this),value:this.value}}getRevertToDefaultDescriptor(e){return[{objectName:e,propertyName:this.name}]}setPropertiesValues(e,t){var i;let o=null===(i=null==e?void 0:e[t])||void 0===i?void 0:i[this.name];this.value=a.S(this,o,this.value)}}class r extends n{constructor(e){super(e),this.type=\"ToggleSwitch\"}}class c extends n{constructor(e){super(e),this.type=\"ColorPicker\"}getFormattingComponent(e){return Object.assign(Object.assign({},super.getFormattingComponent(e)),{defaultColor:this.defaultColor,isNoFillItemSupported:this.isNoFillItemSupported})}}},261:(e,t,i)=>{i.d(t,{Z:()=>a});const a=class{constructor(e){this.localizationManager=e}populateFormattingSettingsModel(e,t){var i,a,o;let l=new e,s=null===(a=null===(i=null==t?void 0:t[0])||void 0===i?void 0:i.metadata)||void 0===a?void 0:a.objects;return s&&(null===(o=l.cards)||void 0===o||o.forEach((e=>{var t,i,a;null===(t=null==e?void 0:e.slices)||void 0===t||t.forEach((t=>{null==t||t.setPropertiesValues(s,e.name)})),null===(a=null===(i=null==e?void 0:e.container)||void 0===i?void 0:i.containerItems)||void 0===a||a.forEach((t=>{var i;null===(i=null==t?void 0:t.slices)||void 0===i||i.forEach((t=>{null==t||t.setPropertiesValues(s,e.name)}))}))}))),l}buildFormattingModel(e){var t;let i={cards:[]};return null===(t=e.cards)||void 0===t||t.forEach((e=>{if(!e)return;const t=e.name,a=e.name+\"-group\";let o={displayName:void 0,slices:[],uid:a},l=e.getFormattingCard(t,o,this.localizationManager);i.cards.push(l);const s={};if(e.container){const i=e.container,n=a+\"-container\",r={displayName:this.localizationManager&&i.displayNameKey?this.localizationManager.getDisplayName(i.displayNameKey):i.displayName,description:this.localizationManager&&i.descriptionKey?this.localizationManager.getDisplayName(i.descriptionKey):i.description,containerItems:[],uid:n};i.containerItems.forEach((e=>{const i=e.displayNameKey?e.displayNameKey:e.displayName,a=n+i;let o={displayName:this.localizationManager&&e.displayNameKey?this.localizationManager.getDisplayName(e.displayNameKey):e.displayName,slices:[],uid:a};this.buildFormattingSlices(e.slices,t,s,l,o.slices),r.containerItems.push(o)})),o.container=r}e.slices&&this.buildFormattingSlices(e.slices,t,s,l,o.slices),l.revertToDefaultDescriptors=this.getRevertToDefaultDescriptor(e)})),i}buildFormattingSlices(e,t,i,a,o){null==e||e.forEach((e=>{let l=null==e?void 0:e.getFormattingSlice(t,this.localizationManager);l&&(void 0===i[e.name]?i[e.name]=0:(i[e.name]++,l.uid=`${l.uid}-${i[e.name]}`),e.topLevelToggle?(l.suppressDisplayName=!0,a.topLevelToggle=l):o.push(l))}))}getRevertToDefaultDescriptor(e){var t,i;const a={};let o=[],l=this.getSlicesRevertToDefaultDescriptor(e.name,e.slices,a),s=[];return null===(i=null===(t=e.container)||void 0===t?void 0:t.containerItems)||void 0===i||i.forEach((t=>{s=s.concat(this.getSlicesRevertToDefaultDescriptor(e.name,t.slices,a))})),o=l.concat(s),o}getSlicesRevertToDefaultDescriptor(e,t,i){let a=[];return null==t||t.forEach((t=>{t&&!i[t.name]&&(i[t.name]=!0,a=a.concat(t.getRevertToDefaultDescriptor(e)))})),a}}},827:(e,t,i)=>{function a(e,t){return{objectName:e,propertyName:t.name,selector:t.selector,altConstantValueSelector:t.altConstantSelector,instanceKind:t.instanceKind}}function o(e,t,i){return null==t||\"object\"==typeof t&&!t.solid?i:t.solid?{value:null==t?void 0:t.solid.color}:(null==e?void 0:e.items)?e.items.find((e=>e.value==t)):t}i.d(t,{B:()=>a,S:()=>o})},738:e=>{e.exports=Function(\"return this\")()}},t={};function i(a){var o=t[a];if(void 0!==o)return o.exports;var l=t[a]={exports:{}};return e[a](l,l.exports,i),l.exports}i.d=(e,t)=>{for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var a={};(()=>{i.r(a),i.d(a,{default:()=>l});var e=i(104),t=i(738).powerbi,o={name:\"sandboxC839D4652AE8497B8F89CE540B23B914\",displayName:\"sandbox\",class:\"Visual\",apiVersion:\"5.2.0\",create:t=>{if(e.u)return new e.u(t);throw\"Visual instance not found\"},createModalDialog:(e,t,i)=>{const a=globalThis.dialogRegistry;e in a&&new a[e](t,i)},custom:!0};void 0!==t&&(t.visuals=t.visuals||{},t.visuals.plugins=t.visuals.plugins||{},t.visuals.plugins.sandboxC839D4652AE8497B8F89CE540B23B914=o);const l=o})(),sandboxC839D4652AE8497B8F89CE540B23B914=a})();","css":"p {\n  font-size: 20px;\n  font-weight: bold;\n}\np em {\n  background: yellow;\n  padding: 5px;\n}\n\n","iconBase64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpBOEJGMzkxN0NBRDNFMDExQTcxQ0JFODI3ODBCQUE5RSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3NEY1QjA1NUQ0OTAxMUUwQTgxREI2NjMxMkNEMUNEMyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3NEY1QjA1NEQ0OTAxMUUwQTgxREI2NjMxMkNEMUNEMyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5Mjk5RDU1ODBGRDRFMDExQTcxQ0JFODI3ODBCQUE5RSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBOEJGMzkxN0NBRDNFMDExQTcxQ0JFODI3ODBCQUE5RSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpDoNX0AAAI3SURBVHjarJRLSFVRFIY9t7SiRDGLoEEPCRJRaCSYkxCiFCXCF+LIMExQLkilgumgwkbdBuWDRC2EomhURCOjgagkXEgKLUKhidobM6H0+i34rxyPnuvEA5/rXPda/1l7739vJxKJxG3ls93+hEKhTILxJhgMftmsiPxdhHw4CfepeR8dCyjWwwB0kZy3iVgCoQ2ewnmXxhrBD7Cgr/ZQVA17fDRPw2UYhzK6G99IsBse6/0QNME+H8FT4EA/YiPqOgA1q4IMzBNuw6iKjkCpj+Av+AdnEEmD3bxfhzvuDk30HaEaLsEkXCO53rN+Bwg5qsvTuj/TjGYtx9nINhRmEx7AYWiFW7AXOuEcbPOUvIZ2mnrl+PkQUbNEh4QHNKUSDdsSBWEOlmxTEfvs26FL9Khe211if6Acgee+xo7xzMgBxfq9qPe3fgWBGN2lEnqtG9nExM7CV3jp3bDos2bKJB0nHFRxAxRpA/5CIXyHh5ABv6GZqd9dJ6iz2SjbxMMypGhJFtTlNzu3kK7xgDxpove8U66FK2A+s6nul5gVVMEL+Ak7lG/T+g9JcIOGar2CRUoogxMwpP/bLTJMB9bRhDbkk5bBUU0y3ES0xS04CBfN9RSHiY90vJK0BHaSzG9h2eejS3RJeVfdtrGzuGyd8CX7Yq6ExuCH63jaVMPkFOv6OibB6DKs2+VEQp+WYBoqERn2sVWWRNN0YurIfeL14U6YkpkLYCSG6e0yqdCxvKBLIm5FgAEAV0nKuwMYRUsAAAAASUVORK5CYII="},"visualEntryPoint":"","toolsVersion":null}